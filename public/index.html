<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>QADEER-AI Deploy Panel</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { background:#070617; color:#fff; font-family: Inter, Roboto, sans-serif; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .card { width: 420px; padding:24px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.6); background: linear-gradient(135deg,#0b1020 0%,#100a21 100%); }
    h1 { margin:0 0 12px; font-size:20px; text-align:center; color:#f6bdff; letter-spacing:1px }
    input, button { width:100%; padding:12px; margin-top:12px; border-radius:8px; border:0; font-size:14px; }
    input { background:#fff; color:#000; }
    button { background: linear-gradient(90deg,#ff7ec6,#7b61ff); color:#fff; cursor:pointer; font-weight:600; }
    .note { margin-top:10px; font-size:12px; color:#bbb }
    .log { margin-top:12px; font-size:13px; background:#0005; padding:10px; border-radius:8px; height:120px; overflow:auto; color:#d8d8d8; }
  </style>
</head>
<body>
  <div class="card">
    <h1>QADEER-AI â€” Deploy Panel</h1>
    <input id="session" placeholder="Paste your SESSION_ID (QADEER-AI~...)" />
    <input id="fname" placeholder="Optional friendly name (short)" />
    <button id="deploy">ACTIVATE DEPLOYMENT</button>
    <div class="note">Your Session_ID will be used to run your bot on Render. Do not share your Session_ID publicly.</div>
    <div class="log" id="log">Status logs will appear here...</div>
  </div>

<script>
  const logEl = document.getElementById('log');
  function log(s){ logEl.innerText = (new Date().toLocaleTimeString()) + '  ' + s + '\n' + logEl.innerText; }

  document.getElementById('deploy').addEventListener('click', async () => {
    const session = document.getElementById('session').value.trim();
    const fname = document.getElementById('fname').value.trim();
    if(!session){ alert('Please paste session id'); return; }
    log('Sending deploy request...');
    try{
      const res = await fetch('/api/deploy', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ sessionId: session, friendlyName: fname })
      });
      const data = await res.json();
      if(data.success){
        log('Deploy started. Render response: ' + (data.data && data.data.id ? 'Service ID: ' + data.data.id : JSON.stringify(data.data)));
        alert('Deployment started. Check logs for details.');
      } else {
        log('Error: ' + JSON.stringify(data));
        alert('Error: ' + (data.message || 'See console'));
      }
    }catch(e){
      console.error(e);
      log('Network or server error: ' + e.message);
      alert('Network error: ' + e.message);
    }
  });
</script>

</body>
</html>
